"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EnvStack = void 0;
const ec2 = require("@aws-cdk/aws-ec2");
const cdk = require("@aws-cdk/core");
const s3 = require("@aws-cdk/aws-s3");
const core_1 = require("@aws-cdk/core");
class EnvStack extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        const isProd = (props && props.production);
        const bucketName = isProd ? 'MyPattern3ProductionBucket' : 'MyPattern3TestBucket';
        const vpcName = isProd ? 'MyPattern3ProductionVpc' : 'MyPattern3TestVpc';
        const bucket = new s3.Bucket(this, bucketName, {
            encryption: s3.BucketEncryption.KMS_MANAGED,
            blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,
            versioned: true,
            removalPolicy: cdk.RemovalPolicy.DESTROY
        });
        core_1.Tags.of(bucket).add('myDefaultTag', 'hooray-for-tagging');
        // Create a vpc
        const vpc = new ec2.Vpc(this, vpcName, { maxAzs: 2 });
    }
}
exports.EnvStack = EnvStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW52LXN0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZW52LXN0YWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHdDQUF3QztBQUN4QyxxQ0FBcUM7QUFDckMsc0NBQXNDO0FBQ3RDLHdDQUFxQztBQU9yQyxNQUFhLFFBQVMsU0FBUSxHQUFHLENBQUMsS0FBSztJQUNyQyxZQUFZLEtBQWMsRUFBRSxFQUFVLEVBQUUsS0FBdUI7UUFDN0QsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEIsTUFBTSxNQUFNLEdBQUcsQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzFDLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixDQUFDO1FBQ2xGLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDO1FBRXpFLE1BQU0sTUFBTSxHQUFHLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQzdDLFVBQVUsRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsV0FBVztZQUMzQyxpQkFBaUIsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsU0FBUztZQUNqRCxTQUFTLEVBQUUsSUFBSTtZQUNmLGFBQWEsRUFBRSxHQUFHLENBQUMsYUFBYSxDQUFDLE9BQU87U0FDekMsQ0FBQyxDQUFDO1FBRUgsV0FBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLG9CQUFvQixDQUFDLENBQUE7UUFFekQsZUFBZTtRQUNmLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFeEQsQ0FBQztDQUNGO0FBckJELDRCQXFCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGVjMiBmcm9tICdAYXdzLWNkay9hd3MtZWMyJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICdAYXdzLWNkay9jb3JlJztcbmltcG9ydCAqIGFzIHMzIGZyb20gJ0Bhd3MtY2RrL2F3cy1zMyc7XG5pbXBvcnQgeyBUYWdzIH0gZnJvbSAnQGF3cy1jZGsvY29yZSc7XG5cbi8vIENyZWF0ZSBhIGN1c3RvbSBwcm9wZXJ0eSB0aGF0IGRldGVybWluZXMgd2hldGhlciB0aGUgc3RhY2sgaXMgYSB0ZXN0IGVudiBvciBwcm9kIGVudlxuaW50ZXJmYWNlIE11bHRpU3RhY2tQcm9wcyBleHRlbmRzIGNkay5TdGFja1Byb3BzIHtcbiAgcHJvZHVjdGlvbj86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNsYXNzIEVudlN0YWNrIGV4dGVuZHMgY2RrLlN0YWNrIHtcbiAgY29uc3RydWN0b3Ioc2NvcGU6IGNkay5BcHAsIGlkOiBzdHJpbmcsIHByb3BzPzogTXVsdGlTdGFja1Byb3BzKSB7XG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XG5cbiAgICBjb25zdCBpc1Byb2QgPSAocHJvcHMgJiYgcHJvcHMucHJvZHVjdGlvbilcbiAgICBjb25zdCBidWNrZXROYW1lID0gaXNQcm9kID8gJ015UGF0dGVybjNQcm9kdWN0aW9uQnVja2V0JyA6ICdNeVBhdHRlcm4zVGVzdEJ1Y2tldCc7XG4gICAgY29uc3QgdnBjTmFtZSA9IGlzUHJvZCA/ICdNeVBhdHRlcm4zUHJvZHVjdGlvblZwYycgOiAnTXlQYXR0ZXJuM1Rlc3RWcGMnO1xuXG4gICAgY29uc3QgYnVja2V0ID0gbmV3IHMzLkJ1Y2tldCh0aGlzLCBidWNrZXROYW1lLCB7XG4gICAgICBlbmNyeXB0aW9uOiBzMy5CdWNrZXRFbmNyeXB0aW9uLktNU19NQU5BR0VELCBcbiAgICAgIGJsb2NrUHVibGljQWNjZXNzOiBzMy5CbG9ja1B1YmxpY0FjY2Vzcy5CTE9DS19BTEwsXG4gICAgICB2ZXJzaW9uZWQ6IHRydWUsXG4gICAgICByZW1vdmFsUG9saWN5OiBjZGsuUmVtb3ZhbFBvbGljeS5ERVNUUk9ZXG4gICAgfSk7XG4gICAgXG4gICAgVGFncy5vZihidWNrZXQpLmFkZCgnbXlEZWZhdWx0VGFnJywgJ2hvb3JheS1mb3ItdGFnZ2luZycpXG5cbiAgICAvLyBDcmVhdGUgYSB2cGNcbiAgICBjb25zdCB2cGMgPSBuZXcgZWMyLlZwYyh0aGlzLCB2cGNOYW1lLCB7IG1heEF6czogMiB9KTtcblxuICB9XG59XG4iXX0=